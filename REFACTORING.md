# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏–≥—Ä—ã OTA Sematary

## –û–±–∑–æ—Ä

–ò–≥—Ä–∞ –±—ã–ª–∞ –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–∞ –∏–∑ –¥–≤—É—Ö –±–æ–ª—å—à–∏—Ö –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (MainScene.js - 2534 —Å—Ç—Ä–æ–∫–∏, BootScene.js - 1584 —Å—Ç—Ä–æ–∫–∏) –≤ –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

## –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/game/
‚îú‚îÄ‚îÄ entities/               # –ò–≥—Ä–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ Player.js          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ Zombie.js          # –ú–µ–Ω–µ–¥–∂–µ—Ä –æ–±—ã—á–Ω—ã—Ö –∑–æ–º–±–∏
‚îÇ   ‚îú‚îÄ‚îÄ Zubkov.js          # –ë–æ—Å—Å Zubkov
‚îÇ   ‚îú‚îÄ‚îÄ ZombieGirl.js      # –ó–æ–º–±–∏-–¥–µ–≤–æ—á–∫–∞ –ù–∞—Ä–∏–Ω–µ
‚îÇ   ‚îî‚îÄ‚îÄ FriendlyNPC.js     # –î—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ NPC
‚îÇ
‚îú‚îÄ‚îÄ systems/               # –ò–≥—Ä–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ MapSystem.js       # –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –∏ —Å—Ç–µ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ BuildingSystem.js  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏—è–º–∏ –∏ —É–∫—Ä—ã—Ç–∏—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ ServerTransferSystem.js  # –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ GraveyardSystem.js       # –°–µ—Ä–≤–µ—Ä—ã –∏ –º–æ–≥–∏–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ BeerSystem.js            # –°–∏—Å—Ç–µ–º–∞ –ø–∏–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ PrincessSystem.js        # –ü—Ä–∏–Ω—Ü–µ—Å—Å–∞ –∏ –ø–æ–±–µ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ CollisionSystem.js       # –í—Å–µ –∫–æ–ª–ª–∏–∑–∏–∏ –∏–≥—Ä—ã
‚îÇ
‚îú‚îÄ‚îÄ sprites/               # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å–ø—Ä–∞–π—Ç–æ–≤ (TODO)
‚îÇ   ‚îî‚îÄ‚îÄ SpriteGenerator.js
‚îÇ
‚îî‚îÄ‚îÄ scenes/                # Phaser —Å—Ü–µ–Ω—ã
    ‚îú‚îÄ‚îÄ MainScene.js              # –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (2534 —Å—Ç—Ä–æ–∫–∏)
    ‚îú‚îÄ‚îÄ MainScene.refactored.js   # –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (200 —Å—Ç—Ä–æ–∫!)
    ‚îî‚îÄ‚îÄ BootScene.js              # –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**
- –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥–∏
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥

### 2. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**
- MainScene —Å–æ–∫—Ä–∞—Ç–∏–ª—Å—è —Å 2534 –¥–æ ~200 —Å—Ç—Ä–æ–∫
- –ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤

### 3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
- –ü—Ä–æ—â–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ –±—ã—Å—Ç—Ä–æ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Entities (–°—É—â–Ω–æ—Å—Ç–∏)
–ö–ª–∞—Å—Å—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∏–≥—Ä–æ–≤—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏:

- **PlayerEntity**: –ó–¥–æ—Ä–æ–≤—å–µ, –æ–ø—å—è–Ω–µ–Ω–∏–µ, –¥–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
- **ZombieManager**: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ã—á–Ω—ã–º–∏ –∑–æ–º–±–∏
- **ZubkovEntity**: –ë–æ—Å—Å —Å —É—Å–∏–ª–µ–Ω–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- **ZombieGirlEntity**: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–æ–º–±–∏-–¥–µ–≤–æ—á–∫–∞
- **FriendlyNPCManager**: –î—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å —Ñ—Ä–∞–∑–∞–º–∏

### Systems (–°–∏—Å—Ç–µ–º—ã)
–ö–ª–∞—Å—Å—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∏–≥—Ä–æ–≤—ã–º–∏ –º–µ—Ö–∞–Ω–∏–∫–∞–º–∏:

- **MapSystem**: –ö–∞—Ä—Ç–∞, —Ç—Ä–∞–≤–∞, –¥–æ—Ä–æ–∂–∫–∏, –∑–∞–±–æ—Ä—ã, —ç—Ñ—Ñ–µ–∫—Ç—ã
- **BuildingSystem**: –ó–¥–∞–Ω–∏—è, —É–∫—Ä—ã—Ç–∏—è, –∞–ø—Ç–µ—á–∫–∏, –æ—Ç–∫—Ä—ã—Ç–∏–µ –æ—Ñ–∏—Å–∞
- **ServerTransferSystem**: –ü–æ–¥–±–æ—Ä –∏ –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
- **GraveyardSystem**: –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–≥–∏–ª
- **BeerSystem**: –ü–æ–¥–±–æ—Ä –ø–∏–≤–∞, —ç—Ñ—Ñ–µ–∫—Ç—ã –æ–ø—å—è–Ω–µ–Ω–∏—è
- **PrincessSystem**: –ü—Ä–∏–Ω—Ü–µ—Å—Å–∞, –ø–æ–±–µ–¥–∞, —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∏
- **CollisionSystem**: –í—Å–µ –∫–æ–ª–ª–∏–∑–∏–∏ –≤ –∏–≥—Ä–µ

## –ö–∞–∫ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

1. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ç–µ–∫—É—â–∏–π `MainScene.js` –≤ `MainScene.old.js`
2. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ `MainScene.refactored.js` –≤ `MainScene.js`
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–≥—Ä—É
4. –ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —É–¥–∞–ª–∏—Ç–µ `MainScene.old.js`

```bash
mv src/game/scenes/MainScene.js src/game/scenes/MainScene.old.js
mv src/game/scenes/MainScene.refactored.js src/game/scenes/MainScene.js
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

–ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –æ–±–∞ —Ñ–∞–π–ª–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å—Ü–µ–Ω—É:

```javascript
// –í src/components/Game.jsx
import MainScene from '../game/scenes/MainScene.refactored'
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –æ–±–µ —Å—Ü–µ–Ω—ã –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –Ω–∏–º–∏:

```javascript
const config = {
  scene: [BootScene, MainScene] // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω—É–∂–Ω—É—é
}
```

## –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ BootScene
BootScene (1584 —Å—Ç—Ä–æ–∫–∏) –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞:

```
sprites/
‚îú‚îÄ‚îÄ PlayerSprites.js
‚îú‚îÄ‚îÄ ZombieSprites.js
‚îú‚îÄ‚îÄ BuildingSprites.js
‚îú‚îÄ‚îÄ ItemSprites.js
‚îî‚îÄ‚îÄ TileSprites.js
```

### 2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –í—ã–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤—Ä–∞–≥–∞

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (MainScene.js)
```javascript
// –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å—Ä–µ–¥–∏ 2534 —Å—Ç—Ä–æ–∫ –≥–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Ä–∞–≥–∏
// –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç
// –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
```javascript
// 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
// src/game/entities/NewEnemy.js

export class NewEnemyEntity {
  constructor(scene) {
    this.scene = scene
  }
  
  create(x, y) {
    this.sprite = this.scene.physics.add.sprite(x, y, 'new_enemy')
    return this.sprite
  }
  
  update() {
    // –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  }
}

// 2. –î–æ–±–∞–≤—å—Ç–µ –≤ MainScene.js
import { NewEnemyEntity } from '../entities/NewEnemy'

create() {
  this.newEnemy = new NewEnemyEntity(this)
  this.newEnemy.create(100, 100)
}

update() {
  this.newEnemy.update()
}

// 3. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–ª–∏–∑–∏—é –≤ CollisionSystem.js
setupCollisions() {
  this.scene.physics.add.overlap(player, newEnemy.sprite, 
    this.newEnemyHitPlayer, null, this)
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. ‚úÖ –ò–≥—Ä–æ–∫ –¥–≤–∏–∂–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ –ó–æ–º–±–∏ –ø—Ä–µ—Å–ª–µ–¥—É—é—Ç –∏–≥—Ä–æ–∫–∞
3. ‚úÖ Zubkov –∞–≥—Ä–∏—Ç—Å—è –∏ –±—å–µ—Ç —Å–∏–ª—å–Ω–µ–µ
4. ‚úÖ –ó–æ–º–±–∏-–¥–µ–≤–æ—á–∫–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è
5. ‚úÖ NPC –≥–æ–≤–æ—Ä—è—Ç —Ñ—Ä–∞–∑—ã
6. ‚úÖ –ü–∏–≤–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –ø—å—è–Ω–∏—Ç
7. ‚úÖ –°–µ—Ä–≤–µ—Ä—ã —É–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è –∏ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –º–æ–≥–∏–ª—ã
8. ‚úÖ –ü–µ—Ä–µ–Ω–æ—Å —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–∑ Selectel –≤ Yandex
9. ‚úÖ –û—Ñ–∏—Å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
10. ‚úÖ –ê–ø—Ç–µ—á–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∑–¥–æ—Ä–æ–≤—å–µ
11. ‚úÖ –ó–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —É–∫—Ä—ã—Ç–∏–µ
12. ‚úÖ –ü—Ä–∏–Ω—Ü–µ—Å—Å–∞ –∏ –ø–æ–±–µ–¥–∞
13. ‚úÖ Game Over —Ä–∞–±–æ—Ç–∞–µ—Ç
14. ‚úÖ –ö–æ—Å—Ç—ã–ª–∏ –ª–µ—Ç—è—Ç –≤ –∏–≥—Ä–æ–∫–∞

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ **–Ω–µ –≤–ª–∏—è–µ—Ç** –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –í—Å–µ –æ–±—ä–µ–∫—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –ü–∞–º—è—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞–∫ –∂–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –¥–∞–ª—å–Ω–µ–π—à—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏–≥—Ä—ã. –ö–æ–¥ —Å—Ç–∞–ª:
- üì¶ –ú–æ–¥—É–ª—å–Ω—ã–º
- üìñ –ß–∏—Ç–∞–µ–º—ã–º
- üîß –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º
- üöÄ –ì–æ—Ç–æ–≤—ã–º –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

–ü—Ä–∏ —ç—Ç–æ–º –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–ª–∞—Å—å —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –∏ –±—ã–ª–∞!

